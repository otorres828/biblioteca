(()=>{var e={278:(e,r,o)=>{e.exports=function(e){var r=o(605),t=o(167);const s=o(142),n=o(17);s.config({path:n.resolve(__dirname,".env")});const a={Accept:"application/json","Content-Type":"application/json","Custom-Header":"Custom-Value"},i=new r(process.env.LECTOR_ENTRADA,{baudRate:9600}),c=new r.parsers.Readline;i.pipe(c),c.on("data",(e=>{if(console.log(e),e.includes('"Card"')&&e.includes('"UID"')&&e.includes('"iCardCode"')&&e.includes('"iSiteCode"')&&e.includes('"iCode"')){const r=JSON.parse(e).Card;console.log("TARJETA DATOS: "+r),t.get(process.env.URL_API+"/control-acceso/validar-entrada/"+r.iCardCode,{headers:a}).then((function(e){let{estatus:r,cedula:o,nombre:t,carrera:s,tipo:n,avatar:a,error:c}=e.data;"ok"===r?i.write("ok\n"):i.write("rj\n")})).catch((e=>{console.error("Error al obtener al intentar valiar la tarjeta")}))}}))}},429:(e,r,o)=>{e.exports=function(e){var r=o(605),t=o(167);const s=o(142),n=o(17);s.config({path:n.resolve(__dirname,".env")});const a={Accept:"application/json","Content-Type":"application/json","Custom-Header":"Custom-Value"},i=new r(process.env.LECTOR_ENTRADA,{baudRate:9600}),c=new r.parsers.Readline;i.pipe(c),c.on("data",(e=>{if(e.includes('"Card"')&&e.includes('"UID"')&&e.includes('"iCardCode"')&&e.includes('"iSiteCode"')&&e.includes('"iCode"')){const r=JSON.parse(e).Card;console.log("TARJETA DATOS: "+r),t.get(process.env.URL_API+"/control-acceso/validar-salida/"+r.iCardCode,{headers:a}).then((function(e){let{estatus:r,cedula:o,nombre:t,carrera:s,tipo:n,avatar:a,error:c}=e.data;"ok"===r?i.write("ok\n"):i.write("rj\n")})).catch((e=>{console.error("Error al obtener al intentar valiar la tarjeta")}))}}))}},138:(e,r,o)=>{const t=o(860),s=o(582),n=o(685),a=o(77),i=o(142),c=o(17);i.config({path:c.resolve(__dirname,".env")});let d=t(),l=n.createServer(d);const p=o(952)(l,{cors:{origin:"*",methods:["GET","POST"]}});d.io=p,p.on("connection",(()=>{console.log("Conexion al socket exitosa")})),d.use(s()),d.use(t.urlencoded({extended:!1})),d.use(t.json()),o(429)(p),o(278)(p);const u=process.env.PORT||u;l.listen(u,"0.0.0.0",(()=>{console.log(`Servidor corriendo en el puerto ${u}`)})),d.get("/",((e,r)=>{const o=a.address();r.send(o)})),e.exports=d},167:e=>{"use strict";e.exports=require("axios")},582:e=>{"use strict";e.exports=require("cors")},142:e=>{"use strict";e.exports=require("dotenv")},860:e=>{"use strict";e.exports=require("express")},77:e=>{"use strict";e.exports=require("ip")},605:e=>{"use strict";e.exports=require("serialport")},952:e=>{"use strict";e.exports=require("socket.io")},685:e=>{"use strict";e.exports=require("http")},17:e=>{"use strict";e.exports=require("path")}},r={};!function o(t){var s=r[t];if(void 0!==s)return s.exports;var n=r[t]={exports:{}};return e[t](n,n.exports,o),n.exports}(138)})();